name: Notify Discord on PR events

on:
  pull_request:
    types: [opened, reopened]
  pull_request_review:
    types: [submitted]

jobs:
  notify:
    runs-on: ubuntu-latest
    env:
      WEBHOOK: ${{ secrets.DISCWEBHOOK }}

    steps:
      - name: Send Discord notification for new PR
        if: github.event_name == 'pull_request' && (github.event.action == 'opened' || github.event.action == 'reopened')
        run: |
          curl -H "Content-Type: application/json" \
            -d "{\"content\": \"ðŸ“¢ **New Pull Request Created!**\nðŸ“„ Title: [${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})\nðŸ‘¤ Author: ${{ github.event.pull_request.user.login }}\"}" \
            "$WEBHOOK"

      - name: Send Discord notification for PR approval
        if: github.event_name == 'pull_request_review' && github.event.review.state == 'approved'
        run: |
          curl -H "Content-Type: application/json" \
            -d "{\"content\": \"âœ… **Pull Request Approved!**\nðŸ“„ [${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})\nðŸ‘¤ Approved by: ${{ github.event.review.user.login }}\"}" \
            "$WEBHOOK"
